---
import { site } from "@/consts";

// 一言列表
const hitokotoList = site.hitokoto;

// 随机选择一言
const randomIndex = Math.floor(Math.random() * hitokotoList.length);
const randomHitokoto = hitokotoList[randomIndex];
const characterCount = randomHitokoto.length;

// 计算打字动画持续时间（单位：秒）
const typingDuration = (characterCount * 80) / 1000;
---

<div class="hidden min-h-[1.5rem] sm:flex sm:items-center sm:justify-start">
  <p
    id="hitokoto"
    class="inline-block max-w-md text-zinc-500"
    style={`--character-count: ${characterCount}; --typing-duration: ${typingDuration}s;`}
  >
    {randomHitokoto}
  </p>
</div>

<style>
  #hitokoto {
    /* 超出部分隐藏 */
    overflow: hidden;
    /* 防止文本换行 */
    white-space: nowrap;
    width: 0;
    /* 动画：使用动态时长 */
    animation: typing var(--typing-duration) steps(var(--character-count)) forwards;
    animation-delay: 0.8s;
  }

  @keyframes typing {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }
</style>
