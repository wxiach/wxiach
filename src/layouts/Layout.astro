---
import "@/styles/global.css";
import "@/styles/animations.css";
import Head from "@/components/Head.astro";
import Fireworks from "@/components/Fireworks.astro";
import AvatarAnimation from "@/components/AvatarAnimation.astro";

type Props = {
  siteSubTitle?: string;
};

const { siteSubTitle } = Astro.props;
---

<html lang="en">
  <head>
    <Head siteSubTitle={siteSubTitle} />
    <script is:inline>
      // Scroll to top on page load (refresh)
      window.onload = function () {
        window.scrollTo(0, 0);
      };

      // Handle back/forward navigation
      if ("scrollRestoration" in history) {
        // Modern browsers
        history.scrollRestoration = "manual";
      }

      // Backup method using pageshow event
      window.addEventListener("pageshow", function (event) {
        if (event.persisted) {
          // Page was loaded from back/forward cache
          window.scrollTo(0, 0);
        }
      });
    </script>
  </head>
  <body class="mx-auto flex max-w-screen-md flex-col gap-32 overflow-x-hidden px-4 py-32">
    <slot />
    <Fireworks />
    <AvatarAnimation />
  </body>
</html>
